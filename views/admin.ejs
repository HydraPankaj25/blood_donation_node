<!DOCTYPE html>
<html lang="en">

<head>
  <title>Admin Page</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
</head>

<body>
  <a href="/">
    <button class="btn btn-success" id="cross_btn" style="float: right;">&#10060;</button>
  </a>

  <div class="container mt-3">
    <center>
      <h2>WELCOME "<%= adminN %>"</h2>
    </center>
    <br>
    <center><u>
        <h5>Data Of All The User Under The Table</h5>
      </u></center>
    <br>
    <table class="table table-striped" border="1">
      <thead>
        <tr>
          <th>Donor_Id</th>
          <th>Name</th>
          <th>City</th>
          <th>Address</th>
          <th>E-Mail</th>
          <th>Mobile No.</th>
          <th>Blood Group</th>
          <th>DOB</th>
          <th>Gender</th>
          <th>Blood Donation Date</th>
          <th>Blood Donation Time</th>
          <th>Bld Turn</th>
          <th>Bld Point</th>
          <th>Satus</th>
          <th>Donation Satus</th>
        </tr>
      </thead>

      <!-- Concept for current date -->
      <% var today=new Date();%>
        <!-- <% let cDate=today.toLocaleDateString("en-US");%>
          <% console.log(cDate) %> -->


        <% for(var i=0; i<data.length; i++) { %>
          <tbody>
            <tr>
              <td>
                <%= data[i].donor_id %>
              </td>
              <td>
                <%= data[i].Name %>
              </td>
              <td>
                <%= data[i].City %>
              </td>
              <td>
                <%= data[i].Address %>
              </td>
              <td>
                <%= data[i].Email %>
              </td>
              <td>
                <%= data[i].Mobnumber %>
              </td>
              <td>
                <%= data[i].Bloodgrrp %>
              </td>
              <td>
                <%=data[i].dobDay%>/<%=data[i].dobMonth%>/<%=data[i].dobYear%>
              </td>
              <td>
                <%= data[i].gender %>
              </td>
              <td>
                <%= data[i].BLDdate %>/<%= data[i].BLDmonth %>/<%=data[i].BLDyear %>
              </td>
              <td>
                <%= data[i].BLDtimehr %> : <%= data[i].BLDtimemin %>
              </td>
              <td>
                <%= data[i].BLDturn %>
              </td>
              <td>
                <%= data[i].BLDpoint %>
              </td>
              <td>
                <%= data[i].Satus %>
              </td>
              <td>
                <!-- Concept for next date checking  -->
                <%var d=new Date(`${data[i].BLDmonth} ${data[i].BLDdate},${data[i].BLDyear}`);%>
                  <%d.setMonth(d.getMonth() + 3);%>
                    <!-- <%let nextdt=d.toLocaleDateString();%> -->

                    <!-- Making button for blood donating -->
                    <%if (d !="Invalid Date" && d>= today) { %>
                      <center><span style="color: red; " id="donatespan">DONATED</span></center>
                      <% } %>

                        <%if (data[i].BLDdate===null || d <=today) { %>
                          <center><button class="btn btn-primary"><a href="/bloodDoantion?phone=<%=data[i].Mobnumber%>"
                                style="text-decoration: none; color: white;">DONATE</a></button>
                          </center>
                          <% } %>
              </td>
            </tr>
          </tbody>
          <% } %>
    </table>
  </div>

</body>

</html>